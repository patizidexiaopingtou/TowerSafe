

import("//kernel/liteos_m/liteos.gni")

module_name = "components"
module_group(module_name) {
  modules = []
  deps = [
    ":esp_adc_cal",
    ":esp_app_update",
    ":esp_bootloader",
    ":esp_bootloader_support",
    ":esp_bt",
    ":esp_common",
    ":esp_cxx",
    ":esp_driver",
    ":esp_efuse",
    ":esp_esp32",
    ":esp_event",
    ":esp_hal",
    ":esp_heap",
    ":esp_hw_support",
    ":esp_log",
    ":esp_netif",
    ":esp_newlib",
    ":esp_nvs_flash",
    ":esp_osal",
    ":esp_pthread",
    ":esp_ringbuf",
    ":esp_rom",
    ":esp_soc",
    ":esp_spi_flash",
    ":esp_system",
    ":esp_tcpip_adapter",
    ":esp_timer",
    ":esp_wifi",
    ":esp_xtensa",
    ":partition_table",
  ]
}

set_defaults("static_library") {
  configs = []
  deps = []
  cflags = []
  cflags_c = []
  cflags_cc = []
  asmflags = []
  defines = []
  include_dirs = []
  public_configs = []
  public = []
  arflags = []
  libs = []
}
template("StaticLibrary") {
  static_library(target_name) {
    forward_variables_from(invoker, "*")
    deps = []
    cflags = []
    cflags_c = invoker._flags_c
    cflags_cc = invoker._flags_cc
    asmflags = invoker._flags_s
    defines = invoker._defines
    if (defined(invoker._arflags)) {
      arflags = invoker._arflags
    } else {
      arflags = []
    }
    include_dirs = [
                     "//kernel/liteos_m/kernel/include",
                     "//kernel/liteos_m/arch/include",
                     "//kernel/liteos_m/utils",
                     "//kernel/liteos_m/components/power",
                     "//kernel/liteos_m",
                     "${board_adapter_dir}/target/include",
                     "//third_party/mbedtls/include",
                     "osal/include",
                     "osal/port/xtensa/include",
                   ] + invoker._includes
    include_dirs += [
      "${board_adapter_dir}/third_party_adapter/lwip-2.1/include",
      "${board_adapter_dir}/third_party_adapter/lwip-2.1/include/lwip",
      "esp_lwip/port/include",
      "esp_lwip/port/include/arch",
      "//third_party/lwip/src/include",
    ]
    output_prefix_override = false
    no_default_deps = true

    if (defined(LOSCFG_SOC_ESP32_D0WDQ6)) {
      cflags_c += ["-DENABLE_SPIRAM"]
    }

  }
}

# 导入SDK配置
import("sdkconfig.gni")

# ============================================= libesp_hw_support
StaticLibrary("boot_esp_hw_support") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
    "-fno-jump-tables",
    "-fno-tree-switch-conversion",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "port/esp32",
  ]

  _ldflags = []
  sources = [
    "esp_hw_support/compare_set.c",
    "esp_hw_support/cpu_util.c",
    "esp_hw_support/port/esp32/rtc_clk.c",
    "esp_hw_support/port/esp32/rtc_clk_init.c",
    "esp_hw_support/port/esp32/rtc_init.c",
    "esp_hw_support/port/esp32/rtc_pm.c",
    "esp_hw_support/port/esp32/rtc_sleep.c",
    "esp_hw_support/port/esp32/rtc_time.c",
    "esp_hw_support/port/esp32/rtc_wdt.c",
  ]
}

# ============================================= libbootloader_support
StaticLibrary("boot_bootloader_support") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "src",
    "src/esp32",
  ]

  _ldflags = []
  sources = [
    "bootloader_support/src/bootloader_clock_init.c",
    "bootloader_support/src/bootloader_clock_loader.c",
    "bootloader_support/src/bootloader_common.c",
    "bootloader_support/src/bootloader_common_loader.c",
    "bootloader_support/src/bootloader_console.c",
    "bootloader_support/src/bootloader_console_loader.c",
    "bootloader_support/src/bootloader_efuse_esp32.c",
    "bootloader_support/src/bootloader_flash.c",
    "bootloader_support/src/bootloader_flash_config_esp32.c",
    "bootloader_support/src/bootloader_init.c",
    "bootloader_support/src/bootloader_mem.c",
    "bootloader_support/src/bootloader_panic.c",
    "bootloader_support/src/bootloader_random.c",
    "bootloader_support/src/bootloader_random_esp32.c",
    "bootloader_support/src/bootloader_utility.c",
    "bootloader_support/src/esp32/bootloader_esp32.c",
    "bootloader_support/src/esp32/bootloader_sha.c",
    "bootloader_support/src/esp32/flash_encrypt.c",
    "bootloader_support/src/esp_image_format.c",
    "bootloader_support/src/flash_encrypt.c",
    "bootloader_support/src/flash_partitions.c",
    "bootloader_support/src/flash_qio_mode.c",
    "bootloader_support/src/secure_boot.c",
  ]
}

# ============================================= liblog
StaticLibrary("boot_log") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "log/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
  ]

  _ldflags = []
  sources = [
    "log/log.c",
    "log/log_buffers.c",
    "log/log_noos.c",
  ]
}

# ============================================= libspi_flash
StaticLibrary("boot_spi_flash") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "spi_flash/private_include",
    "spi_flash/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "esp32",
  ]

  _ldflags = []
  sources = [ "spi_flash/esp32/spi_flash_rom_patch.c" ]
}

# ============================================= libmicro-ecc
StaticLibrary("boot_micro-ecc") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
  ]

  _ldflags = []
  sources =
      [ "bootloader/subproject/components/micro-ecc/uECC_verify_antifault.c" ]
}

# ============================================= libsoc
StaticLibrary("boot_soc") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "soc/esp32/adc_periph.c",
    "soc/esp32/dac_periph.c",
    "soc/esp32/gpio_periph.c",
    "soc/esp32/i2c_periph.c",
    "soc/esp32/i2s_periph.c",
    "soc/esp32/interrupts.c",
    "soc/esp32/ledc_periph.c",
    "soc/esp32/pcnt_periph.c",
    "soc/esp32/rmt_periph.c",
    "soc/esp32/rtc_io_periph.c",
    "soc/esp32/sdio_slave_periph.c",
    "soc/esp32/sdmmc_periph.c",
    "soc/esp32/sigmadelta_periph.c",
    "soc/esp32/soc_memory_layout.c",
    "soc/esp32/spi_periph.c",
    "soc/esp32/timer_periph.c",
    "soc/esp32/touch_sensor_periph.c",
    "soc/esp32/uart_periph.c",
    "soc/lldesc.c",
    "soc/memory_layout_utils.c",
    "soc/soc_include_legacy_warn.c",
  ]
}

# ============================================= libmain
StaticLibrary("boot_main") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "bootloader/subproject/main/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
  ]

  _ldflags = []
  sources = [ "bootloader/subproject/main/bootloader_start.c" ]
}

# ============================================= libefuse
StaticLibrary("boot_efuse") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "efuse/private_include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "esp32",
    "src",
    "src/esp32",
  ]

  _ldflags = []
  sources = [
    "efuse/esp32/esp_efuse_table.c",
    "efuse/src/esp32/esp_efuse_api.c",
    "efuse/src/esp32/esp_efuse_fields.c",
    "efuse/src/esp32/esp_efuse_utility.c",
    "efuse/src/esp_efuse_api.c",
    "efuse/src/esp_efuse_fields.c",
    "efuse/src/esp_efuse_utility.c",
  ]
}

# ============================================= libesp_rom
StaticLibrary("boot_esp_rom") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "hal/esp32/include",
    "hal/include",
    "patches",
  ]

  _ldflags = []
  sources = [
    "esp_rom/patches/esp_rom_crc.c",
    "esp_rom/patches/esp_rom_longjmp.S",
    "esp_rom/patches/esp_rom_sys.c",
    "esp_rom/patches/esp_rom_uart.c",
  ]
}

# ============================================= libhal
StaticLibrary("boot_hal") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "hal/esp32/include",
    "hal/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "hal/adc_hal.c",
    "hal/aes_hal.c",
    "hal/cpu_hal.c",
    "hal/dac_hal.c",
    "hal/esp32/adc_hal.c",
    "hal/esp32/brownout_hal.c",
    "hal/esp32/gpio_hal_workaround.c",
    "hal/esp32/interrupt_descriptor_table.c",
    "hal/esp32/touch_sensor_hal.c",
    "hal/gpio_hal.c",
    "hal/i2c_hal.c",
    "hal/i2c_hal_iram.c",
    "hal/i2s_hal.c",
    "hal/interrupt_controller_hal.c",
    "hal/ledc_hal.c",
    "hal/ledc_hal_iram.c",
    "hal/mcpwm_hal.c",
    "hal/mpu_hal.c",
    "hal/pcnt_hal.c",
    "hal/rmt_hal.c",
    "hal/rtc_io_hal.c",
    "hal/sdio_slave_hal.c",
    "hal/sha_hal.c",
    "hal/sigmadelta_hal.c",
    "hal/soc_hal.c",
    "hal/spi_flash_hal.c",
    "hal/spi_flash_hal_iram.c",
    "hal/spi_hal.c",
    "hal/spi_hal_iram.c",
    "hal/spi_slave_hal.c",
    "hal/spi_slave_hal_iram.c",
    "hal/timer_hal.c",
    "hal/touch_sensor_hal.c",
    "hal/twai_hal.c",
    "hal/twai_hal_iram.c",
    "hal/uart_hal.c",
    "hal/uart_hal_iram.c",
    "hal/wdt_hal_iram.c",
  ]
}

# ============================================= libxtensa
StaticLibrary("boot_xtensa") {
  _flags_c = [
    "-std=gnu99",
    "-Os",
    "-freorder-blocks",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "BOOTLOADER_BUILD=1",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "esp_common/include",
    "newlib/platform_include",
    "xtensa/include",
    "xtensa/esp32/include",
    ".",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "bootloader_support/include",
    "bootloader_support/include_bootloader",
    "log/include",
    "spi_flash/include",
    "bootloader/subproject/components/micro-ecc",
    "bootloader/subproject/components/micro-ecc/micro-ecc",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "bootloader/subproject/main/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "hal/esp32/include",
    "hal/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "xtensa/debug_helpers.c",
    "xtensa/debug_helpers_asm.S",
    "xtensa/eri.c",
    "xtensa/esp32/trax_init.c",
    "xtensa/stdatomic.c",
    "xtensa/trax.c",
  ]
}

executable("esp_bootloader") {
  no_default_deps = true
  cflags = []
  output_name = "bootloader.elf"
  lib_dirs = [
    rebase_path("$root_out_dir/libs"),
    rebase_path("libs"),
  ]
  cflags_c = []
  asmflags = []
  cflags_cc = []
  defines = []
  include_dirs = []
  ldflags = [
    "-nostdlib",
    "-ucall_user_start_cpu0",
    "-Wl,--gc-sections",
    "-Wl,-static",
    "-Tbootloader.ld",
    "-Tbootloader.rom.ld",
    "-Tesp32.rom.ld",
    "-Tesp32.rom.newlib-funcs.ld",
    "-Tesp32.rom.api.ld",
    "-Tesp32.peripherals.ld",
    "-Tesp32.rom.libgcc.ld",
    "-Tesp32.rom.syscalls.ld",
    "-Tesp32.rom.newlib-data.ld",
    "-Tesp32.rom.newlib-time.ld",
    "-Wl,--wrap=longjmp",
    "-Wl,-EL",
    "-fno-rtti",
  ]
  inputs = [
    rebase_path("libs/bootloader.ld"),
    rebase_path("libs/bootloader.rom.ld"),
    rebase_path("libs/esp32.rom.ld"),
    rebase_path("libs/esp32.rom.api.ld"),
    rebase_path("libs/esp32.rom.syscalls.ld"),
  ]
  libs = [
    "xt_hal",
    "gcc",
    "stdc++",
    "gcov",
  ]

  sources = []
  deps = [
    ":boot_bootloader_support",
    ":boot_efuse",
    ":boot_esp_hw_support",
    ":boot_esp_rom",
    ":boot_hal",
    ":boot_log",
    ":boot_main",
    ":boot_micro-ecc",
    ":boot_soc",
    ":boot_spi_flash",
    ":boot_xtensa",
  ]
}

# 生成分区表
action("partition_table") {
  script = rebase_path("partition_table/gen_esp32part.py")
  _output_file = "$root_out_dir/bin/partitions.bin"
  _input_file = "partition_table/" + CONFIG_PARTITION_TABLE_FILENAME
  outputs = [ _output_file ]
  inputs = [ _input_file ]
  args = [
    "-q",
    "--flash-size",
    CONFIG_ESPTOOLPY_FLASHSIZE,
    "--offset",
    CONFIG_PARTITION_TABLE_OFFSET,
    rebase_path(_input_file),
    rebase_path(_output_file),
  ]
}

# ============================================= libapp_update
StaticLibrary("esp_app_update") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
    "PROJECT_VER=\"1\"",
    "PROJECT_NAME=\"spp_client_demo\"",
  ]

  _includes = [
    "app_update/include",
    "app_trace/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "app_update/esp_app_desc.c",
    "app_update/esp_ota_ops.c",
  ]
}

# ============================================= libbootloader_support
StaticLibrary("esp_bootloader_support") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "bootloader_support/include_bootloader",
    "bootloader_support/include",
    "app_trace/include",
    "app_update/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "src",
    "src/idf",
  ]

  _ldflags = []
  sources = [
    "bootloader_support/src/bootloader_clock_init.c",
    "bootloader_support/src/bootloader_common.c",
    "bootloader_support/src/bootloader_common_loader.c",
    "bootloader_support/src/bootloader_efuse_esp32.c",
    "bootloader_support/src/bootloader_flash.c",
    "bootloader_support/src/bootloader_flash_config_esp32.c",
    "bootloader_support/src/bootloader_mem.c",
    "bootloader_support/src/bootloader_random.c",
    "bootloader_support/src/bootloader_random_esp32.c",
    "bootloader_support/src/bootloader_utility.c",
    "bootloader_support/src/esp_image_format.c",
    "bootloader_support/src/flash_encrypt.c",
    "bootloader_support/src/flash_partitions.c",
    "bootloader_support/src/flash_qio_mode.c",
    "bootloader_support/src/idf/bootloader_sha.c",
    "bootloader_support/src/secure_boot.c",
  ]
}

# ============================================= libbt
StaticLibrary("esp_bt") {
  _flags_c = [
    "-std=gnu99",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-Wno-implicit-fallthrough",
    "-MMD",
    "-MP",
    "-Wno-unused-const-variable",
  ]
  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]
  _includes = [
    ".",
    "bt/common/btc/include",
    "bt/common/include",
    "bt/host/bluedroid/bta/include",
    "bt/host/bluedroid/bta/ar/include",
    "bt/host/bluedroid/bta/dm/include",
    "bt/host/bluedroid/bta/gatt/include",
    "bt/host/bluedroid/bta/hh/include",
    "bt/host/bluedroid/bta/jv/include",
    "bt/host/bluedroid/bta/sdp/include",
    "bt/host/bluedroid/bta/sys/include",
    "bt/host/bluedroid/device/include",
    "bt/host/bluedroid/gki/include",
    "bt/host/bluedroid/hci/include",
    "bt/host/bluedroid/utils/include",
    "bt/host/bluedroid/external/sbc/decoder/include",
    "bt/host/bluedroid/external/sbc/encoder/include",
    "bt/host/bluedroid/external/sbc/plc/include",
    "bt/host/bluedroid/btc/profile/esp/include",
    "bt/host/bluedroid/btc/profile/std/gatt/include",
    "bt/host/bluedroid/btc/profile/std/gap/include",
    "bt/host/bluedroid/btc/profile/std/hid/include",
    "bt/host/bluedroid/btc/profile/std/include",
    "bt/host/bluedroid/btc/include",
    "bt/host/bluedroid/btif/include",
    "bt/host/bluedroid/stack/btm/include",
    "bt/host/bluedroid/stack/btu/include",
    "bt/host/bluedroid/stack/gap/include",
    "bt/host/bluedroid/stack/gatt/include",
    "bt/host/bluedroid/stack/hcic/include",
    "bt/host/bluedroid/stack/l2cap/include",
    "bt/host/bluedroid/stack/sdp/include",
    "bt/host/bluedroid/stack/smp/include",
    "bt/host/bluedroid/stack/rfcomm/include",
    "bt/host/bluedroid/stack/include",
    "bt/host/bluedroid/common/include",
    "bt/include",
    "bt/include/esp32/include",
    "bt/common/api/include/api",
    "bt/common/btc/profile/esp/blufi/include",
    "bt/common/btc/profile/esp/include",
    "bt/common/osi/include",
    "bt/host/bluedroid/api/include/api",
    "app_trace/include",
    "app_update/include",
    "asio/asio/asio/include",
    "asio/port/include",
    "bootloader_support/include",
    "cbor/port/include",
    "cmock/include",
    "coap/port/include",
    "coap/port/include/coap",
    "coap/libcoap/include",
    "coap/libcoap/include/coap2",
    "console",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp-tls",
    "esp-tls/esp-tls-crypto",
    "esp-tls/private_include",
    "esp32/include",
    "esp_adc_cal/include",
    "esp_common/include",
    "esp_event/include",
    "esp_gdbstub/include",
    "esp_hid/include",
    "esp_http_client/include",
    "esp_http_server/include",
    "esp_https_ota/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_ipc/include",
    "esp_local_ctrl/include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_serial_slave_link/include",
    "esp_system/include",
    "esp_timer/include",
    "esp_websocket_client/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "espcoredump/include",
    "expat/expat/expat/lib",
    "expat/port/include",
    "fatfs/diskio",
    "fatfs/vfs",
    "fatfs/src",
    "freemodbus/common/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "idf_test/include",
    "idf_test/include/esp32",
    "jsmn/include",
    "json/cJSON",
    "libsodium/libsodium/src/libsodium/include",
    "libsodium/port_include",
    "log/include",
    "mdns/include",
    "mqtt/esp-mqtt/include",
    "newlib/platform_include",
    "nghttp/port/include",
    "nghttp/nghttp2/lib/includes",
    "nvs_flash/include",
    "openssl/include",
    "perfmon/include",
    "protobuf-c/protobuf-c",
    "protocomm/include/common",
    "protocomm/include/security",
    "protocomm/include/transports",
    "pthread/include",
    "sdmmc/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "spiffs/include",
    "tcp_transport/include",
    "tcpip_adapter/include",
    "ulp/include",
    "unity/include",
    "unity/unity/src",
    "vfs/include",
    "wear_levelling/include",
    "wifi_provisioning/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "controller/esp32",
    "common/api",
    "common/btc/core",
    "common/osi",
    "common/btc/profile/esp/blufi",
    "host/bluedroid/bta/dm",
    "host/bluedroid/bta/gatt",
    "host/bluedroid/bta/hh",
    "host/bluedroid/bta/sdp",
    "host/bluedroid/bta/ar",
    "host/bluedroid/bta/sys",
    "host/bluedroid/bta/jv",
    "host/bluedroid/device",
    "host/bluedroid/hci",
    "host/bluedroid/main",
    "host/bluedroid/external/sbc/decoder/srce",
    "host/bluedroid/external/sbc/encoder/srce",
    "host/bluedroid/external/sbc/plc",
    "host/bluedroid/btc/core",
    "host/bluedroid/btc/profile/std/gap",
    "host/bluedroid/btc/profile/std/gatt",
    "host/bluedroid/btc/profile/std/spp",
    "host/bluedroid/btc/profile/std/hid",
    "host/bluedroid/stack/btm",
    "host/bluedroid/stack/btu",
    "host/bluedroid/stack/gap",
    "host/bluedroid/stack/gatt",
    "host/bluedroid/stack/hcic",
    "host/bluedroid/stack/l2cap",
    "host/bluedroid/stack/sdp",
    "host/bluedroid/stack/smp",
    "host/bluedroid/stack/rfcomm",
    "host/bluedroid/api",
    "common/btc/profile/esp/blufi/bluedroid_host",
  ]
  _ldflags = []
  sources = [
    "bt/common/api/esp_blufi_api.c",
    "bt/common/btc/core/btc_alarm.c",
    "bt/common/btc/core/btc_manage.c",
    "bt/common/btc/core/btc_task.c",
    "bt/common/btc/profile/esp/blufi/bluedroid_host/esp_blufi.c",
    "bt/common/btc/profile/esp/blufi/blufi_prf.c",
    "bt/common/btc/profile/esp/blufi/blufi_protocol.c",
    "bt/common/osi/alarm.c",
    "bt/common/osi/allocator.c",
    "bt/common/osi/buffer.c",
    "bt/common/osi/config.c",
    "bt/common/osi/fixed_queue.c",
    "bt/common/osi/future.c",
    "bt/common/osi/hash_functions.c",
    "bt/common/osi/hash_map.c",
    "bt/common/osi/list.c",
    "bt/common/osi/mutex.c",
    "bt/common/osi/osi.c",
    "bt/common/osi/semaphore.c",
    "bt/common/osi/thread.c",
    "bt/controller/esp32/bt.c",
    "bt/host/bluedroid/api/esp_bt_device.c",
    "bt/host/bluedroid/api/esp_bt_main.c",
    "bt/host/bluedroid/api/esp_gap_ble_api.c",
    "bt/host/bluedroid/api/esp_gap_bt_api.c",
    "bt/host/bluedroid/api/esp_gatt_common_api.c",
    "bt/host/bluedroid/api/esp_gattc_api.c",
    "bt/host/bluedroid/api/esp_gatts_api.c",
    "bt/host/bluedroid/api/esp_spp_api.c",
    "bt/host/bluedroid/bta/dm/bta_dm_act.c",
    "bt/host/bluedroid/bta/dm/bta_dm_api.c",
    "bt/host/bluedroid/bta/dm/bta_dm_cfg.c",
    "bt/host/bluedroid/bta/dm/bta_dm_ci.c",
    "bt/host/bluedroid/bta/dm/bta_dm_co.c",
    "bt/host/bluedroid/bta/dm/bta_dm_main.c",
    "bt/host/bluedroid/bta/dm/bta_dm_pm.c",
    "bt/host/bluedroid/bta/dm/bta_dm_qos.c",
    "bt/host/bluedroid/bta/dm/bta_dm_sco.c",
    "bt/host/bluedroid/bta/gatt/bta_gatt_common.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_act.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_api.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_cache.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_ci.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_co.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_main.c",
    "bt/host/bluedroid/bta/gatt/bta_gattc_utils.c",
    "bt/host/bluedroid/bta/gatt/bta_gatts_act.c",
    "bt/host/bluedroid/bta/gatt/bta_gatts_api.c",
    "bt/host/bluedroid/bta/gatt/bta_gatts_co.c",
    "bt/host/bluedroid/bta/gatt/bta_gatts_main.c",
    "bt/host/bluedroid/bta/gatt/bta_gatts_utils.c",
    "bt/host/bluedroid/bta/hh/bta_hh_act.c",
    "bt/host/bluedroid/bta/hh/bta_hh_api.c",
    "bt/host/bluedroid/bta/hh/bta_hh_cfg.c",
    "bt/host/bluedroid/bta/hh/bta_hh_le.c",
    "bt/host/bluedroid/bta/hh/bta_hh_main.c",
    "bt/host/bluedroid/bta/hh/bta_hh_utils.c",
    "bt/host/bluedroid/bta/sdp/bta_sdp.c",
    "bt/host/bluedroid/bta/sdp/bta_sdp_act.c",
    "bt/host/bluedroid/bta/sdp/bta_sdp_api.c",
    "bt/host/bluedroid/bta/sdp/bta_sdp_cfg.c",
    "bt/host/bluedroid/bta/sys/bta_sys_conn.c",
    "bt/host/bluedroid/bta/sys/bta_sys_main.c",
    "bt/host/bluedroid/bta/sys/utl.c",
    "bt/host/bluedroid/btc/core/btc_ble_storage.c",
    "bt/host/bluedroid/btc/core/btc_config.c",
    "bt/host/bluedroid/btc/core/btc_dev.c",
    "bt/host/bluedroid/btc/core/btc_dm.c",
    "bt/host/bluedroid/btc/core/btc_main.c",
    "bt/host/bluedroid/btc/core/btc_profile_queue.c",
    "bt/host/bluedroid/btc/core/btc_sec.c",
    "bt/host/bluedroid/btc/core/btc_sm.c",
    "bt/host/bluedroid/btc/core/btc_storage.c",
    "bt/host/bluedroid/btc/core/btc_util.c",
    "bt/host/bluedroid/btc/profile/std/gap/bta_gap_bt_co.c",
    "bt/host/bluedroid/btc/profile/std/gap/btc_gap_ble.c",
    "bt/host/bluedroid/btc/profile/std/gap/btc_gap_bt.c",
    "bt/host/bluedroid/btc/profile/std/gatt/btc_gatt_common.c",
    "bt/host/bluedroid/btc/profile/std/gatt/btc_gatt_util.c",
    "bt/host/bluedroid/btc/profile/std/gatt/btc_gattc.c",
    "bt/host/bluedroid/btc/profile/std/gatt/btc_gatts.c",
    "bt/host/bluedroid/btc/profile/std/hid/hidh_api.c",
    "bt/host/bluedroid/btc/profile/std/hid/hidh_conn.c",
    "bt/host/bluedroid/btc/profile/std/spp/btc_spp.c",
    "bt/host/bluedroid/device/bdaddr.c",
    "bt/host/bluedroid/device/controller.c",
    "bt/host/bluedroid/device/interop.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/alloc.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/bitalloc-sbc.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/bitalloc.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/bitstream-decode.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/decoder-oina.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/decoder-private.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/decoder-sbc.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/dequant.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/framing-sbc.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/framing.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/oi_codec_version.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/synthesis-8-generated.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/synthesis-dct8.c",
    "bt/host/bluedroid/external/sbc/decoder/srce/synthesis-sbc.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_analysis.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_dct.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_dct_coeffs.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_enc_bit_alloc_mono.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_enc_bit_alloc_ste.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_enc_coeffs.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_encoder.c",
    "bt/host/bluedroid/external/sbc/encoder/srce/sbc_packing.c",
    "bt/host/bluedroid/external/sbc/plc/sbc_plc.c",
    "bt/host/bluedroid/hci/hci_audio.c",
    "bt/host/bluedroid/hci/hci_hal_h4.c",
    "bt/host/bluedroid/hci/hci_layer.c",
    "bt/host/bluedroid/hci/hci_packet_factory.c",
    "bt/host/bluedroid/hci/hci_packet_parser.c",
    "bt/host/bluedroid/hci/packet_fragmenter.c",
    "bt/host/bluedroid/main/bte_init.c",
    "bt/host/bluedroid/main/bte_main.c",
    "bt/host/bluedroid/stack/btm/btm_acl.c",
    "bt/host/bluedroid/stack/btm/btm_ble.c",
    "bt/host/bluedroid/stack/btm/btm_ble_5_gap.c",
    "bt/host/bluedroid/stack/btm/btm_ble_addr.c",
    "bt/host/bluedroid/stack/btm/btm_ble_adv_filter.c",
    "bt/host/bluedroid/stack/btm/btm_ble_batchscan.c",
    "bt/host/bluedroid/stack/btm/btm_ble_bgconn.c",
    "bt/host/bluedroid/stack/btm/btm_ble_cont_energy.c",
    "bt/host/bluedroid/stack/btm/btm_ble_gap.c",
    "bt/host/bluedroid/stack/btm/btm_ble_multi_adv.c",
    "bt/host/bluedroid/stack/btm/btm_ble_privacy.c",
    "bt/host/bluedroid/stack/btm/btm_dev.c",
    "bt/host/bluedroid/stack/btm/btm_devctl.c",
    "bt/host/bluedroid/stack/btm/btm_inq.c",
    "bt/host/bluedroid/stack/btm/btm_main.c",
    "bt/host/bluedroid/stack/btm/btm_pm.c",
    "bt/host/bluedroid/stack/btm/btm_sco.c",
    "bt/host/bluedroid/stack/btm/btm_sec.c",
    "bt/host/bluedroid/stack/btu/btu_hcif.c",
    "bt/host/bluedroid/stack/btu/btu_init.c",
    "bt/host/bluedroid/stack/btu/btu_task.c",
    "bt/host/bluedroid/stack/gap/gap_api.c",
    "bt/host/bluedroid/stack/gap/gap_ble.c",
    "bt/host/bluedroid/stack/gap/gap_conn.c",
    "bt/host/bluedroid/stack/gap/gap_utils.c",
    "bt/host/bluedroid/stack/gatt/att_protocol.c",
    "bt/host/bluedroid/stack/gatt/gatt_api.c",
    "bt/host/bluedroid/stack/gatt/gatt_attr.c",
    "bt/host/bluedroid/stack/gatt/gatt_auth.c",
    "bt/host/bluedroid/stack/gatt/gatt_cl.c",
    "bt/host/bluedroid/stack/gatt/gatt_db.c",
    "bt/host/bluedroid/stack/gatt/gatt_main.c",
    "bt/host/bluedroid/stack/gatt/gatt_sr.c",
    "bt/host/bluedroid/stack/gatt/gatt_utils.c",
    "bt/host/bluedroid/stack/hcic/hciblecmds.c",
    "bt/host/bluedroid/stack/hcic/hcicmds.c",
    "bt/host/bluedroid/stack/l2cap/l2c_api.c",
    "bt/host/bluedroid/stack/l2cap/l2c_ble.c",
    "bt/host/bluedroid/stack/l2cap/l2c_csm.c",
    "bt/host/bluedroid/stack/l2cap/l2c_fcr.c",
    "bt/host/bluedroid/stack/l2cap/l2c_link.c",
    "bt/host/bluedroid/stack/l2cap/l2c_main.c",
    "bt/host/bluedroid/stack/l2cap/l2c_ucd.c",
    "bt/host/bluedroid/stack/l2cap/l2c_utils.c",
    "bt/host/bluedroid/stack/l2cap/l2cap_client.c",
    "bt/host/bluedroid/stack/rfcomm/port_api.c",
    "bt/host/bluedroid/stack/rfcomm/port_rfc.c",
    "bt/host/bluedroid/stack/rfcomm/port_utils.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_l2cap_if.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_mx_fsm.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_port_fsm.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_port_if.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_ts_frames.c",
    "bt/host/bluedroid/stack/rfcomm/rfc_utils.c",
    "bt/host/bluedroid/stack/sdp/sdp_api.c",
    "bt/host/bluedroid/stack/sdp/sdp_db.c",
    "bt/host/bluedroid/stack/sdp/sdp_discovery.c",
    "bt/host/bluedroid/stack/sdp/sdp_main.c",
    "bt/host/bluedroid/stack/sdp/sdp_server.c",
    "bt/host/bluedroid/stack/sdp/sdp_utils.c",
    "bt/host/bluedroid/stack/smp/aes.c",
    "bt/host/bluedroid/stack/smp/p_256_curvepara.c",
    "bt/host/bluedroid/stack/smp/p_256_ecc_pp.c",
    "bt/host/bluedroid/stack/smp/p_256_multprecision.c",
    "bt/host/bluedroid/stack/smp/smp_act.c",
    "bt/host/bluedroid/stack/smp/smp_api.c",
    "bt/host/bluedroid/stack/smp/smp_br_main.c",
    "bt/host/bluedroid/stack/smp/smp_cmac.c",
    "bt/host/bluedroid/stack/smp/smp_keys.c",
    "bt/host/bluedroid/stack/smp/smp_l2c.c",
    "bt/host/bluedroid/stack/smp/smp_main.c",
    "bt/host/bluedroid/stack/smp/smp_utils.c",
  ]
}

# ============================================= libcxx
StaticLibrary("esp_cxx") {
  _flags_c = []
  _flags_s = []
  _flags_cc = [
    "-std=gnu++11",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-fno-exceptions",
    "-fno-rtti",
    "-MMD",
    "-MP",
  ]

  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "bt/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "cxx/cxx_exception_stubs.cpp",
    "cxx/cxx_guards.cpp",
  ]
}

# ============================================= libdriver
StaticLibrary("esp_driver") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
    "-std=gnu11",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "driver/include/driver",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "driver/adc_common.c",

    #    "driver/mcpwm.c",
    #    "driver/sdmmc_transaction.c",
    "driver/dac_common.c",
    "driver/esp32/adc.c",

    #    "driver/esp32/touch_sensor.c",
    "driver/esp32/dac.c",

    #    "driver/twai.c",
    #    "driver/sdspi_host.c",
    "driver/gpio.c",
    "driver/i2c.c",

    #    "driver/sigmadelta.c",
    #    "driver/touch_sensor_common.c",
    #    "driver/sdio_slave.c",
    #    "driver/i2s.c",
    #    "driver/sdspi_transaction.c",
    "driver/ledc.c",

    #    "driver/timer.c",
    "driver/periph_ctrl.c",

    #    "driver/pcnt.c",
    #    "driver/sdspi_crc.c",
    #    "driver/sdmmc_host.c",
    "driver/rmt.c",
    "driver/rtc_io.c",
    "driver/rtc_module.c",
    "driver/spi_bus_lock.c",
    "driver/spi_common.c",
    "driver/spi_master.c",
    "driver/spi_slave.c",
    "driver/uart.c",
  ]
}

# ============================================= libefuse
StaticLibrary("esp_efuse") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "efuse/private_include",
    "efuse/esp32/include",
    "efuse/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
    "src",
    "src/esp32",
  ]

  _ldflags = []
  sources = [
    "efuse/esp32/esp_efuse_table.c",
    "efuse/src/esp32/esp_efuse_api.c",
    "efuse/src/esp32/esp_efuse_fields.c",
    "efuse/src/esp32/esp_efuse_utility.c",
    "efuse/src/esp_efuse_api.c",
    "efuse/src/esp_efuse_fields.c",
    "efuse/src/esp_efuse_utility.c",
  ]
}

# ============================================= libesp32
StaticLibrary("esp_esp32") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp32/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "esp32/cache_err_int.c",
    "esp32/cache_sram_mmu.c",
    "esp32/clk.c",
    "esp32/crosscore_int.c",
    "esp32/dport_access.c",
    "esp32/esp_himem.c",
    "esp32/hw_random.c",
    "esp32/spiram.c",
    "esp32/spiram_psram.c",
    "esp32/system_api_esp32.c",
  ]
}

# ============================================= libesp_adc_cal
StaticLibrary("esp_adc_cal") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_adc_cal/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [ "esp_adc_cal/esp_adc_cal_esp32.c" ]
}

# ============================================= libesp_common
StaticLibrary("esp_common") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_common/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "src",
  ]

  _ldflags = []
  sources = [
    "esp_common/src/brownout.c",
    "esp_common/src/dbg_stubs.c",
    "esp_common/src/esp_err.c",
    "esp_common/src/esp_err_to_name.c",
    "esp_common/src/freertos_hooks.c",
    "esp_common/src/int_wdt.c",
    "esp_common/src/mac_addr.c",
    "esp_common/src/stack_check.c",
    "esp_common/src/task_wdt.c",
  ]
}

# ============================================= libesp_event
StaticLibrary("esp_event") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_event/private_include",
    "esp_event/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "esp_event/default_event_loop.c",
    "esp_event/esp_event.c",
    "esp_event/esp_event_private.c",
    "esp_event/event_loop_legacy.c",
    "esp_event/event_send.c",
  ]
}

# ============================================= libesp_hw_support
StaticLibrary("esp_hw_support") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
    "-fno-jump-tables",
    "-fno-tree-switch-conversion",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "port/esp32",
  ]

  _ldflags = []
  sources = [
    "esp_hw_support/clk_ctrl_os.c",
    "esp_hw_support/compare_set.c",
    "esp_hw_support/cpu_util.c",
    "esp_hw_support/port/esp32/rtc_clk.c",
    "esp_hw_support/port/esp32/rtc_clk_init.c",
    "esp_hw_support/port/esp32/rtc_init.c",
    "esp_hw_support/port/esp32/rtc_pm.c",
    "esp_hw_support/port/esp32/rtc_sleep.c",
    "esp_hw_support/port/esp32/rtc_time.c",
    "esp_hw_support/port/esp32/rtc_wdt.c",
  ]
}

# ============================================= libesp_netif
StaticLibrary("esp_netif") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_netif/private_include",
    "esp_netif/lwip",
    "esp_netif/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp_lwip",
    "loopback",
  ]

  _ldflags = []
  sources = [
    "esp_netif/esp_netif_defaults.c",
    "esp_netif/esp_netif_handlers.c",
    "esp_netif/esp_netif_objects.c",
    "esp_netif/loopback/esp_netif_loopback.c",
    "esp_netif/lwip/esp_netif_lwip.c",
    "esp_netif/lwip/esp_netif_lwip_defaults.c",
    "esp_netif/lwip/esp_netif_sta_list.c",
  ]
}

# ============================================= libesp_ringbuf
StaticLibrary("esp_ringbuf") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_ringbuf/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [ "esp_ringbuf/ringbuf.c" ]
}

# ============================================= libesp_rom
StaticLibrary("esp_rom") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "patches",
  ]

  _ldflags = []
  sources = [
    "esp_rom/patches/esp_rom_crc.c",
    "esp_rom/patches/esp_rom_longjmp.S",
    "esp_rom/patches/esp_rom_sys.c",
    "esp_rom/patches/esp_rom_uart.c",
  ]
}

# ============================================= libesp_system
StaticLibrary("esp_system") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_system/private_include",
    "esp_system/port/include",
    "esp_system/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "port",
    "port/soc/esp32",
    "port/arch/xtensa",
  ]

  _ldflags = []
  sources = [
    "esp_system/esp_async_memcpy.c",
    "esp_system/intr_alloc.c",
    "esp_system/panic.c",
    "esp_system/port/arch/xtensa/panic_arch.c",
    "esp_system/port/arch/xtensa/panic_handler_asm.S",
    "esp_system/port/cpu_start.c",
    "esp_system/port/panic_handler.c",
    "esp_system/port/soc/esp32/clk.c",
    "esp_system/port/soc/esp32/dport_panic_highint_hdl.S",
    "esp_system/port/soc/esp32/intr.c",
    "esp_system/port/soc/esp32/reset_reason.c",
    "esp_system/sleep_modes.c",
    "esp_system/startup.c",
    "esp_system/system_api.c",
    "esp_system/system_time.c",
  ]
}

# ============================================= libesp_timer
StaticLibrary("esp_timer") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_timer/private_include",
    "esp_timer/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "src",
  ]

  _ldflags = []
  sources = [
    "esp_timer/src/esp_timer.c",
    "esp_timer/src/esp_timer_impl_lac.c",
    "esp_timer/src/ets_timer_legacy.c",
  ]
}

# ============================================= libesp_wifi
StaticLibrary("esp_wifi") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "src",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "esp_wifi/esp32/esp_adapter.c",
    "esp_wifi/src/coexist.c",
    "esp_wifi/src/lib_printf.c",
    "esp_wifi/src/phy_init.c",
    "esp_wifi/src/wifi_default.c",
    "esp_wifi/src/wifi_init.c",
    "esp_wifi/src/wifi_netif.c",
  ]
}

# ============================================= libosal
StaticLibrary("esp_osal") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "_ESP_FREERTOS_INTERNAL",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "MBEDTLS_CONFIG_FILE=\"mbedtls/esp_config.h\"",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "hal/esp32/include",
    "hal/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
    "osal/include/esp_osal",
    "osal/port/xtensa/include/esp_osal",
  ]

  _ldflags = []
  sources = [
    "osal/event_groups.c",
    "osal/list.c",
    "osal/liteos_m.c",
    "osal/port/port_common.c",
    "osal/port/xtensa/port.c",
    "osal/port/xtensa/portasm.S",
    "osal/port/xtensa/xtensa_context.S",
    "osal/port/xtensa/xtensa_init.c",
    "osal/port/xtensa/xtensa_vector_defaults.S",
    "osal/port/xtensa/xtensa_vectors.S",
    "osal/queue.c",
    "osal/tasks.c",
  ]
}

# ============================================= libhal
StaticLibrary("esp_hal") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "hal/esp32/include",
    "hal/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "hal/adc_hal.c",
    "hal/aes_hal.c",
    "hal/cpu_hal.c",
    "hal/dac_hal.c",
    "hal/esp32/adc_hal.c",
    "hal/esp32/brownout_hal.c",
    "hal/esp32/emac_hal.c",
    "hal/esp32/gpio_hal_workaround.c",
    "hal/esp32/interrupt_descriptor_table.c",
    "hal/esp32/touch_sensor_hal.c",
    "hal/gpio_hal.c",
    "hal/i2c_hal.c",
    "hal/i2c_hal_iram.c",
    "hal/i2s_hal.c",
    "hal/interrupt_controller_hal.c",
    "hal/ledc_hal.c",
    "hal/ledc_hal_iram.c",
    "hal/mcpwm_hal.c",
    "hal/mpu_hal.c",
    "hal/pcnt_hal.c",
    "hal/rmt_hal.c",
    "hal/rtc_io_hal.c",
    "hal/sdio_slave_hal.c",
    "hal/sha_hal.c",
    "hal/sigmadelta_hal.c",
    "hal/soc_hal.c",
    "hal/spi_flash_hal.c",
    "hal/spi_flash_hal_iram.c",
    "hal/spi_hal.c",
    "hal/spi_hal_iram.c",
    "hal/spi_slave_hal.c",
    "hal/spi_slave_hal_iram.c",
    "hal/timer_hal.c",
    "hal/touch_sensor_hal.c",
    "hal/twai_hal.c",
    "hal/twai_hal_iram.c",
    "hal/uart_hal.c",
    "hal/uart_hal_iram.c",
    "hal/wdt_hal_iram.c",
  ]
}

# ============================================= libheap
StaticLibrary("esp_heap") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "MULTI_HEAP_FREERTOS",
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "heap/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "//kernel/liteos_m/kernel/include/",
    "//device/soc/espressif/esp32/liteos_m/board/",
    "//kernel/liteos_m/utils/",
  ]

  _ldflags = []
  sources = [
    "heap/heap_caps.c",
    "heap/heap_caps_init.c",
    "heap/heap_tlsf.c",
    "heap/multi_heap.c",
  ]
}

# ============================================= liblog
StaticLibrary("esp_log") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "log/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "bt/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "log/log.c",
    "log/log_buffers.c",
    "log/log_freertos.c",
  ]
}

# ============================================= libmain
StaticLibrary("esp_oh_driver_hal") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    ".",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp_adc_cal/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "//commonlibrary/utils_lite/include",
    "//third_party/bounds_checking_function/include",
    "//foundation/systemabilitymgr/samgr_lite/interfaces/kits/samgr",
    "//third_party/cmsis/CMSIS/RTOS2/Include",
  ]

  _ldflags = []
  sources = [
    "oh_driver_hal/adc.c",
    "oh_driver_hal/gpio.c",
    "oh_driver_hal/oled.c",
    "oh_driver_hal/uart.c",
  ]
}

# ============================================= libmbedtls
StaticLibrary("esp_mbedtls") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "mbedtls/library",
    "port",
    "port/esp32",
    "port/sha",
    "port/sha/parallel_engine",
    "port/aes",
    "port/aes/block",
    "port/md",
    "esp_crt_bundle",
  ]

  _ldflags = []
  sources = [
    "mbedtls/esp_crt_bundle/esp_crt_bundle.c",
    "mbedtls/port/aes/block/esp_aes.c",
    "mbedtls/port/aes/esp_aes_common.c",
    "mbedtls/port/aes/esp_aes_gcm.c",
    "mbedtls/port/aes/esp_aes_xts.c",
    "mbedtls/port/esp32/bignum.c",
    "mbedtls/port/esp_bignum.c",
    "mbedtls/port/esp_hardware.c",
    "mbedtls/port/esp_mem.c",
    "mbedtls/port/esp_timing.c",
    "mbedtls/port/mbedtls_debug.c",
    "mbedtls/port/md/esp_md.c",
    "mbedtls/port/net_sockets.c",
    "mbedtls/port/sha/esp_sha.c",
    "mbedtls/port/sha/parallel_engine/esp_sha1.c",
    "mbedtls/port/sha/parallel_engine/esp_sha256.c",
    "mbedtls/port/sha/parallel_engine/esp_sha512.c",
    "mbedtls/port/sha/parallel_engine/sha.c",
  ]
}

# ============================================= libnewlib
StaticLibrary("esp_newlib") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-fno-builtin",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "newlib/priv_include",
    "newlib/platform_include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "port",
  ]

  _ldflags = []
  sources = [
    "newlib/abort.c",
    "newlib/heap.c",
    "newlib/locks.c",
    "newlib/newlib_init.c",
    "newlib/poll.c",
    "newlib/port/esp_time_impl.c",
    "newlib/pthread.c",
    "newlib/random.c",
    "newlib/reent_init.c",
    "newlib/syscalls.c",
    "newlib/termios.c",
    "newlib/time.c",
  ]
}

# ============================================= libnvs_flash
StaticLibrary("esp_nvs_flash") {
  _flags_c = []
  _flags_s = []
  _flags_cc = [
    "-std=gnu++11",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-fno-exceptions",
    "-fno-rtti",
    "-MMD",
    "-MP",
  ]

  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "nvs_flash/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "src",
  ]

  _ldflags = []
  sources = [
    "nvs_flash/src/nvs_api.cpp",
    "nvs_flash/src/nvs_cxx_api.cpp",
    "nvs_flash/src/nvs_encrypted_partition.cpp",
    "nvs_flash/src/nvs_handle_locked.cpp",
    "nvs_flash/src/nvs_handle_simple.cpp",
    "nvs_flash/src/nvs_item_hash_list.cpp",
    "nvs_flash/src/nvs_page.cpp",
    "nvs_flash/src/nvs_pagemanager.cpp",
    "nvs_flash/src/nvs_partition.cpp",
    "nvs_flash/src/nvs_partition_lookup.cpp",
    "nvs_flash/src/nvs_partition_manager.cpp",
    "nvs_flash/src/nvs_storage.cpp",
    "nvs_flash/src/nvs_types.cpp",
  ]
}

# ============================================= libpthread
StaticLibrary("esp_pthread") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "pthread/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [
    "pthread/pthread.c",
    "pthread/pthread_cond_var.c",
    "pthread/pthread_local_storage.c",
  ]
}

# ============================================= libsoc
StaticLibrary("esp_soc") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "soc/esp32/adc_periph.c",
    "soc/esp32/dac_periph.c",
    "soc/esp32/gpio_periph.c",
    "soc/esp32/i2c_periph.c",
    "soc/esp32/i2s_periph.c",
    "soc/esp32/interrupts.c",
    "soc/esp32/ledc_periph.c",
    "soc/esp32/pcnt_periph.c",
    "soc/esp32/rmt_periph.c",
    "soc/esp32/rtc_io_periph.c",
    "soc/esp32/sdio_slave_periph.c",
    "soc/esp32/sdmmc_periph.c",
    "soc/esp32/sigmadelta_periph.c",
    "soc/esp32/soc_memory_layout.c",
    "soc/esp32/spi_periph.c",
    "soc/esp32/timer_periph.c",
    "soc/esp32/touch_sensor_periph.c",
    "soc/esp32/uart_periph.c",
    "soc/lldesc.c",
    "soc/memory_layout_utils.c",
    "soc/soc_include_legacy_warn.c",
  ]
}

# ============================================= libspi_flash
StaticLibrary("esp_spi_flash") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "spi_flash/private_include",
    "spi_flash/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "tcpip_adapter/include",
    "xtensa/include",
    "xtensa/esp32/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "spi_flash/cache_utils.c",
    "spi_flash/esp32/flash_ops_esp32.c",
    "spi_flash/esp32/spi_flash_rom_patch.c",
    "spi_flash/esp_flash_api.c",
    "spi_flash/esp_flash_spi_init.c",
    "spi_flash/flash_mmap.c",
    "spi_flash/flash_ops.c",
    "spi_flash/memspi_host_driver.c",
    "spi_flash/partition.c",
    "spi_flash/spi_flash_chip_boya.c",
    "spi_flash/spi_flash_chip_drivers.c",
    "spi_flash/spi_flash_chip_gd.c",
    "spi_flash/spi_flash_chip_generic.c",
    "spi_flash/spi_flash_chip_issi.c",
    "spi_flash/spi_flash_chip_mxic.c",
    "spi_flash/spi_flash_chip_winbond.c",
    "spi_flash/spi_flash_os_func_app.c",
    "spi_flash/spi_flash_os_func_noos.c",
  ]
}

# ============================================= libtcpip_adapter
StaticLibrary("esp_tcpip_adapter") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = []
  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "tcpip_adapter/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "xtensa/include",
    "xtensa/esp32/include",
  ]

  _ldflags = []
  sources = [ "tcpip_adapter/tcpip_adapter_compat.c" ]
}

# ============================================= libxtensa
StaticLibrary("esp_xtensa") {
  _flags_c = [
    "-std=gnu99",
    "-O2",
    "-Wno-frame-address",
    "-ffunction-sections",
    "-fdata-sections",
    "-fstrict-volatile-bitfields",
    "-mlongcalls",
    "-nostdlib",
    "-Wall",
    "-Werror=all",
    "-Wno-error=unused-function",
    "-Wno-error=unused-but-set-variable",
    "-Wno-error=unused-variable",
    "-Wno-error=deprecated-declarations",
    "-Wextra",
    "-Wno-unused-parameter",
    "-Wno-sign-compare",
    "-Wno-old-style-declaration",
    "-MMD",
    "-MP",
  ]

  _flags_s = [
    "-MMD",
    "-MP",
  ]

  _flags_cc = []
  _defines = [
    "ESP_PLATFORM",
    "IDF_VER=\"v4.3.1-dirty\"",
    "NDEBUG",
    "_GNU_SOURCE",
    "UNITY_INCLUDE_CONFIG_H",
    "HAVE_CONFIG_H",
  ]

  _includes = [
    "xtensa/include",
    "xtensa/esp32/include",
    "app_trace/include",
    "app_update/include",
    "bootloader_support/include",
    "driver/include",
    "driver/esp32/include",
    "driver/esp32/include/driver",
    "efuse/esp32/include",
    "efuse/include",
    "esp32/include",
    "esp_common/include",
    "esp_event/include",
    "esp_hw_support",
    "esp_hw_support/include",
    "esp_hw_support/port/esp32/private_include",
    "esp_netif/include",
    "esp_ringbuf/include",
    "esp_rom/include",
    "esp_rom/esp32",
    "esp_rom/include/esp32",
    "esp_system/include",
    "esp_timer/include",
    "esp_wifi/include",
    "esp_wifi/esp32/include",
    "espcoredump/include",
    "expat/expat/expat/lib",
    "expat/port/include",
    "fatfs/diskio",
    "fatfs/vfs",
    "fatfs/src",
    "freemodbus/common/include",
    "hal/esp32/include",
    "hal/include",
    "heap/include",
    "log/include",
    ".",
    "newlib/platform_include",
    "nvs_flash/include",
    "pthread/include",
    "soc/include",
    "soc/esp32",
    "soc/esp32/include",
    "spi_flash/include",
    "tcpip_adapter/include",
    "ulp/include",
    "unity/include",
    "unity/unity/src",
    "vfs/include",
    "wear_levelling/include",
    "wifi_provisioning/include",
    "esp32",
  ]

  _ldflags = []
  sources = [
    "xtensa/debug_helpers.c",
    "xtensa/debug_helpers_asm.S",
    "xtensa/eri.c",
    "xtensa/esp32/trax_init.c",
    "xtensa/expression_with_stack_xtensa.c",
    "xtensa/expression_with_stack_xtensa_asm.S",
    "xtensa/stdatomic.c",
    "xtensa/trax.c",
    "xtensa/xtensa_intr.c",
    "xtensa/xtensa_intr_asm.S",
  ]
}
